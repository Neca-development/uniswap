<div class="main-container">
  <app-header (changeSettings)="updateComponent()"></app-header>

  <div class="content">

    <div class="pair">
      <h2>Token pair</h2>
      <mat-form-field class="fluid mb-1">
        <mat-label>Token address</mat-label>
        <input
          matInput
          placeholder="Paste token address"
          name="tokenAddress"
          [value]="swap.tokenAddress"
          (change)="changeHandler('tokenAddress', $event)"
        />
      </mat-form-field>
      <div class="pair-data" *ngIf="swap.tokenAddress">
        <p>tokenX - ETH</p>
        <p *ngIf="!data.liquidity.loading">
          Liquidity: <br>
          {{data.liquidity.tokenX}} {{swap.tokenSymbol}} <br>
          {{data.liquidity.weth}} ETH
        </p>
        <p *ngIf="data.liquidity.loading">Loading liqudity data...</p>
      </div>
    </div>

    <div class="wallet">
      <h2>Wallet balance</h2>
      <ul *ngIf="settings.privateKey">
        <li>{{data.balance.eth}} ETH</li>
        <li *ngIf="data.balance.tokenX > 0">{{data.balance.tokenX}} {{swap.tokenSymbol}}</li>
        <li *ngIf="!data.balance.tokenX">Enter token address to get balance of tokenX</li>
      </ul>
      <p *ngIf="!settings.privateKey">Enter private key in settings</p>
    </div>

    <div class="settings">
      <h2>Swap settings</h2>

      <div>
        <mat-form-field class="fluid">
          <mat-label>ETH amount to swap</mat-label>
          <input
            matInput
            placeholder="Enter ETH amount to swap"
            name="tokenAmount"
            [value]="swap.tokenAmount"
            (input)="changeHandler('tokenAmount', $event)"
          />
        </mat-form-field>
      </div>

      <div class="mb-1">
        <mat-label>Gas price method</mat-label>
        <mat-button-toggle-group name="gasSettings" class="fluid settings-price" aria-label="Gas Settings" (change)="changeGasTypeHandler($event)">
          <mat-button-toggle value="default" checked>By default</mat-button-toggle>
          <mat-button-toggle value="manual">Manual</mat-button-toggle>
        </mat-button-toggle-group>
      </div>

      <div *ngIf="swap.gasVariant">
        <mat-form-field class="fluid">
          <mat-label>Gas price</mat-label>
          <input
            matInput
            placeholder="Enter gas price"
            [value]="swap.gasPrice"
            (input)="changeHandler('gasPrice', $event)"
          />
        </mat-form-field>
      </div>

      <div class="settings-submit">
        <button mat-raised-button color="primary" (click)="submitSwap()">Submit</button>
      </div>
    </div>

    <div class="active-settings">
      <h2>Active swap settings</h2>

      <ul *ngIf="swap.active">
        <li>Gas price: {{!swap.gasVariant? 'by default' : swap.gasPrice || 0}}</li>
        <li>ETH to swap: {{swap.tokenAmount}} ETH</li>
        <li>Token to buy: tokenX</li>
      </ul>
      <p *ngIf="!swap.active">Nothing to display</p>

      <ul>
        <li>Swap status: {{swap.active && data.status ? data.status : 'Submit swap'}}</li>
        <li>Block â„–: {{data.currentBlock}}</li>
        <li>Network status: {{settings.network.name}}</li>
      </ul>
    </div>

  </div>
</div>

